<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trade History | byScript</title>
    <link rel="stylesheet" href="../src/styles/color-tokens.css" />
    <link rel="stylesheet" href="../src/styles/main.css" />
    <style>
      .page-trade-history .content-shell {
        display: flex;
        flex-direction: column;
        gap: var(--gap-inner);
        min-width: 0;
        min-height: 0;
        flex: 1;
      }

      .page-trade-history .filter-bar {
        display: grid;
        grid-template-columns: repeat(6, minmax(0, 1fr)) auto;
        gap: 10px;
        align-items: end;
      }

      .page-trade-history .filter-field {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .page-trade-history .filter-label {
        font-size: 0.62rem;
        color: var(--color-text-tertiary);
        text-transform: uppercase;
        letter-spacing: 0.22em;
      }

      .page-trade-history .filter-section {
        display: flex;
        align-items: center;
        border-radius: 8px;
        border: 1px solid var(--color-border-subtle);
        background: var(--color-surface-panel-strong);
        box-shadow: inset 0 1px 0 var(--color-overlay-xxs-strong), 0 10px 18px var(--color-shadow-soft);
      }

      .page-trade-history .filter-select {
        width: 100%;
        background: var(--color-component-dropdown-bg);
        border: 1px solid var(--color-component-dropdown-border);
        border-radius: 6px;
        color: var(--color-component-dropdown-text);
        font-size: 0.72rem;
        padding: 6px 8px;
      }

      .page-trade-history .filter-button {
        align-self: end;
        border-color: var(--color-action-primary-border);
        background: transparent;
        box-shadow: none;
      }


      .page-trade-history .table-panel {
        padding: 0;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        min-height: 0;
      }

      .page-trade-history .table-wrap {
        display: flex;
        flex-direction: column;
        min-height: 0;
        max-height: var(--trade-history-table-max-height, none);
        overflow: hidden;
      }

      .page-trade-history .trade-table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
        display: flex;
        flex-direction: column;
        min-height: 0;
      }

      .page-trade-history .trade-table thead,
      .page-trade-history .trade-table tbody {
        display: block;
      }

      .page-trade-history .trade-table thead tr,
      .page-trade-history .trade-table tbody tr {
        display: table;
        width: 100%;
        table-layout: fixed;
      }

      .page-trade-history .trade-table tbody {
        overflow-y: auto;
        max-height: var(--trade-history-body-max-height, none);
        scrollbar-gutter: stable;
      }

      .page-trade-history .trade-table th,
      .page-trade-history .trade-table td {
        padding: 10px 12px;
        border-bottom: 1px solid var(--color-overlay-sm);
        font-size: 0.78rem;
        color: var(--color-text-secondary);
        text-align: left;
        white-space: nowrap;
      }

      .page-trade-history .trade-table th {
        position: sticky;
        top: 0;
        background: var(--color-component-table-header-bg);
        color: var(--color-text);
        font-size: 0.62rem;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        z-index: 2;
      }

      .page-trade-history .trade-table td strong {
        color: var(--color-text);
        font-weight: 500;
      }

      .page-trade-history .trade-table td.numeric,
      .page-trade-history .trade-table th.numeric {
        text-align: right;
      }

      .page-trade-history .trade-table td.wrap {
        white-space: normal;
      }

      .page-trade-history .trade-pill {
        padding: 4px 8px;
        border-radius: 999px;
        border: 1px solid var(--color-overlay-lg);
        background: var(--color-overlay-xxs);
        font-size: 0.7rem;
        color: var(--color-text-secondary);
        display: inline-flex;
        align-items: center;
      }

      .page-trade-history .trade-pill.positive {
        border-color: var(--color-action-primary-border);
        color: var(--color-status-positive);
      }

      .page-trade-history .trade-pill.negative {
        border-color: var(--color-status-negative-border);
        color: var(--color-status-negative-text-muted);
      }

      .page-trade-history .exchange {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .page-trade-history .exchange-icon {
        width: 18px;
        height: 18px;
        border-radius: 6px;
        border: 1px solid var(--color-overlay-lg);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 0.6rem;
        color: var(--color-text-secondary);
      }

      .page-trade-history .row-hint {
        color: var(--color-text-disabled);
        font-size: 0.7rem;
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .page-trade-history .status-pill {
        letter-spacing: 0.06em;
      }

      .page-trade-history .status-pill--filled {
        color: var(--color-status-positive);
        background: var(--color-component-status-pill-bg);
        border-color: var(--color-action-primary-border);
      }

      .page-trade-history .status-pill--cancelled {
        color: var(--color-status-negative-text-muted);
        background: var(--color-component-status-pill-bg);
        border-color: var(--color-status-negative-border);
      }

      .page-trade-history .status-pill--failed {
        color: var(--color-status-negative);
        background: var(--color-component-status-pill-bg);
        border-color: var(--color-status-negative-border);
      }

      .page-trade-history .table-footer {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        gap: 16px;
        padding: 10px 16px 14px;
        font-size: 0.75rem;
        color: var(--color-muted);
        border-top: 1px solid var(--color-border-subtle);
        background: var(--color-overlay-xxs);
      }

      .page-trade-history .rows-select {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        justify-self: start;
      }

      .page-trade-history .rows-select .rows-pill {
        padding: 4px 10px;
        border-radius: var(--radius-sm);
        border: 1px solid var(--color-component-dropdown-border);
        background: var(--color-component-dropdown-bg);
        color: var(--color-component-dropdown-text);
        font-size: 0.75rem;
        appearance: none;
      }

      .page-trade-history .pagination {
        display: flex;
        gap: 8px;
        align-items: center;
        justify-self: center;
      }

      .page-trade-history .page-button {
        padding: 4px 10px;
        border-radius: var(--radius-sm);
        border: 1px solid var(--color-border);
        background: transparent;
        color: var(--color-muted);
        font-size: 0.75rem;
      }

      .page-trade-history .page-button.is-active {
        border-color: var(--color-action-primary-border-strong);
        color: var(--color-text);
      }
    </style>
  </head>
  <body class="page-trade-history">
    <div id="app" class="app">
      <button class="sidebar-toggle" type="button" aria-label="Toggle sidebar" aria-expanded="true">
        <span class="sidebar-toggle-line"></span>
        <span class="sidebar-toggle-line"></span>
        <span class="sidebar-toggle-line"></span>
      </button>
      <header class="header section section--header section-header app-header">
        <div class="app-header__left">
          <div class="app-header__titleblock">
            <div class="app-header__breadcrumb" data-field="header.breadcrumb">Activity &gt; Trade History</div>
            <h1 class="section-title" data-field="header.title">Trade History</h1>
          </div>
          <div class="header-meta">
            <span class="pill" data-field="header.context"></span>
            <span class="header-subtitle" data-field="header.subtitle"></span>
          </div>
        </div>
        <div class="app-header__right">
          <a class="button app-header__cta" data-header-cta href="autotraders/new.html" hidden>+ Add Autotrader</a>
          <div class="app-header__actions">
            <button class="header-icon-button" type="button" data-shell-toggle="system-alerts" aria-label="System alerts" aria-expanded="false">
              <span class="header-icon">‚ö†Ô∏è</span>
              <span class="header-badge" data-field="header.systemAlertCount" hidden></span>
            </button>
            <button class="header-icon-button" type="button" data-shell-toggle="notifications" aria-label="Notifications" aria-expanded="false">
              <span class="header-icon">üîî</span>
              <span class="header-badge" data-field="header.notificationCount" hidden></span>
            </button>
            <button class="header-user-chip" type="button" data-shell-toggle="user-menu" aria-label="User menu" aria-expanded="false">
              <span class="header-user-avatar">U</span>
              <span class="header-user-label">Hello, User</span>
              <span class="header-user-caret">‚ñæ</span>
            </button>
          </div>
        </div>
      </header>
      <div class="header-panel" data-shell-panel="system-alerts" hidden>
        <div class="header-panel__head">
          <div class="header-panel__title">System Alerts</div>
          <button class="header-panel__close" type="button" data-shell-close aria-label="Close">‚úï</button>
        </div>
        <div class="header-panel__body">
          <div class="header-panel__empty">No system alerts</div>
          <a class="button button--ghost header-panel__link" href="trade-history.html">View All</a>
        </div>
      </div>
      <div class="header-panel" data-shell-panel="notifications" hidden>
        <div class="header-panel__head">
          <div class="header-panel__title">Notifications</div>
          <button class="header-panel__close" type="button" data-shell-close aria-label="Close">‚úï</button>
        </div>
        <div class="header-panel__body">
          <div class="header-panel__empty">No notifications</div>
        </div>
      </div>
      <div class="header-panel" data-shell-panel="user-menu" hidden>
        <div class="header-panel__head">
          <div class="header-panel__title">Account</div>
          <button class="header-panel__close" type="button" data-shell-close aria-label="Close">‚úï</button>
        </div>
        <div class="header-panel__body">
          <a class="header-panel__item" href="affiliate.html">Profile</a>
          <a class="header-panel__item" href="exchanges.html">Settings</a>
          <button class="header-panel__item" type="button">Logout</button>
        </div>
      </div>
      <div class="app-body">
        <aside>
          <nav class="sidebar" aria-label="Primary">
            <div class="sidebar-header">
              <div class="sidebar-logo" aria-hidden="true">B</div>
              <span class="sidebar-logo-text">ByScript</span>
            </div>
            <ul>
              <li>
                <a class="sidebar-item" href="../index.html">
                  <span class="sidebar-icon"></span>
                  <span class="sidebar-label">Dashboard</span>
                </a>
              </li>
              <li>
                <a class="sidebar-item" href="autotraders.html">
                  <span class="sidebar-icon"></span>
                  <span class="sidebar-label">Autotraders</span>
                </a>
              </li>
              <li>
                <a class="sidebar-item" href="exchanges.html">
                  <span class="sidebar-icon"></span>
                  <span class="sidebar-label">Exchanges</span>
                </a>
              </li>
              <li>
                <a class="sidebar-item" href="activity.html">
                  <span class="sidebar-icon"></span>
                  <span class="sidebar-label">Activity</span>
                </a>
              </li>
              <li>
                <a class="sidebar-item sidebar-item--active" href="trade-history.html">
                  <span class="sidebar-icon"></span>
                  <span class="sidebar-label">Trade History</span>
                </a>
              </li>
              <li>
                <a class="sidebar-item" href="backtest.html">
                  <span class="sidebar-icon"></span>
                  <span class="sidebar-label">Strategy Backtest</span>
                </a>
              </li>
              <li>
                <a class="sidebar-item" href="affiliate.html">
                  <span class="sidebar-icon"></span>
                  <span class="sidebar-label">Affiliate</span>
                </a>
              </li>
            </ul>
          </nav>
        </aside>
        <main class="main">
          <div class="content-shell">
            <section class="section trade-history-filters">
              <div class="filter-bar">
                <div class="filter-field">
                  <span class="filter-label">Date Range</span>
                  <div class="filter-section">
                    <select class="filter-select" id="trade-history-date-range">
                      <option value="7d" selected>Last 7 days</option>
                      <option value="30d">Last 30 days</option>
                      <option value="90d">Last 90 days</option>
                      <option value="all">All time</option>
                    </select>
                  </div>
                </div>
                <div class="filter-field">
                  <span class="filter-label">Exchange</span>
                  <div class="filter-section">
                    <select class="filter-select" id="trade-history-exchange">
                      <option value="all" selected>All exchanges</option>
                      <option value="Binance">Binance</option>
                      <option value="OKX">OKX</option>
                      <option value="Bybit">Bybit</option>
                    </select>
                  </div>
                </div>
                <div class="filter-field">
                  <span class="filter-label">Market</span>
                  <div class="filter-section">
                    <select class="filter-select" id="trade-history-market">
                      <option value="all" selected>Spot / Futures</option>
                      <option value="Spot">Spot</option>
                      <option value="Futures">Futures</option>
                    </select>
                  </div>
                </div>
                <div class="filter-field">
                  <span class="filter-label">Pair</span>
                  <div class="filter-section">
                    <select class="filter-select" id="trade-history-pair"></select>
                  </div>
                </div>
                <div class="filter-field">
                  <span class="filter-label">Side</span>
                  <div class="filter-section">
                    <select class="filter-select" id="trade-history-side">
                      <option value="all" selected>Buy / Sell ¬∑ Long / Short</option>
                      <option value="Buy">Buy</option>
                      <option value="Sell">Sell</option>
                      <option value="Long">Long</option>
                      <option value="Short">Short</option>
                    </select>
                  </div>
                </div>
                <div class="filter-field">
                  <span class="filter-label">Status</span>
                  <div class="filter-section">
                    <select class="filter-select" id="trade-history-status">
                      <option value="all" selected>Filled ¬∑ Cancelled ¬∑ Failed</option>
                      <option value="Filled">Filled</option>
                      <option value="Cancelled">Cancelled</option>
                      <option value="Failed">Failed</option>
                    </select>
                  </div>
                </div>
                <button class="button filter-button" type="button" id="trade-history-filters-reset">
                  Filters
                </button>
              </div>
            </section>

            <section class="section table-panel">
              <div class="table-wrap">
                <table class="trade-table">
                  <thead>
                    <tr>
                      <th>Time</th>
                      <th>Exchange</th>
                      <th>Market</th>
                      <th>Pair</th>
                      <th>Action</th>
                      <th class="numeric">Price</th>
                      <th class="numeric">Quantity</th>
                      <th class="numeric">Value</th>
                      <th class="numeric">Fee</th>
                      <th class="numeric">PnL</th>
                      <th>Status</th>
                      <th>Trading Plan</th>
                      <th>Account</th>
                    </tr>
                  </thead>
                  <tbody data-trade-history-rows></tbody>
                </table>
              </div>
              <div class="table-footer">
                <div class="rows-select">
                  <span>Rows per page</span>
                  <select class="rows-pill" id="trade-history-rows">
                    <option value="10" selected>10</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                  </select>
                </div>
                <div class="pagination" aria-label="Pagination" data-trade-history-pagination></div>
              </div>
            </section>
          </div>
        </main>
      </div>
    </div>
    <script type="module" src="../src/scripts/shell.js"></script>
    <script type="module" src="../src/scripts/main.js"></script>
    <script type="module" src="../src/scripts/pages/tradeHistoryPage.js"></script>
  </body>
</html>
